(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{e6Wu:function(a,e,t){"use strict";t.r(e),function(a){t("SYky"),t("hZTp");var e=[],n=!1;a("#api_url")[0].reportValidity(),a("#api_url").on("blur",(function(t){t.target.value.length>0?(a("#empty_api").hide(),e.length>0?a("#empty_data").hide():a("#empty_data").show()):(e.length>0?a("#empty_api").hide():a("#empty_api").show(),a("#empty_data").hide(),a("#api_url")[0].reportValidity())}));var o=function(e){a("form button").attr("disabled",e)},i=function(t){confirm("Deseja realmente deletar essa pessoa?")&&a.ajax({method:"DELETE",url:n+"/pessoa/"+t.target.value}).done((function(a){e=e.filter((function(a){return a._id!=t.target.value})),s(),alert("Pessoa deletada!")})).fail((function(a){alert("Ocorreu um erro ao deletar essa pessoa.")}))},r=function(a){return 1==a?"Cliente":2==a?"Fornecedor":3==a?"Empregado":void 0},s=function(){var t;a("#tabela_container").empty(),e.length?(a("#empty_data").hide(),a("#tabela_container").append((t='<table class="table" style="width: 100%">\n    <thead>\n      <tr><td>Nome</td><td class="ocultavel">Email</td><td>Tipo</td><td></td></tr>\n    </thead>\n    <tbody>',e.forEach((function(a){var e;t+="\n      <tr><td>".concat(a.nome,'</td><td class="ocultavel">').concat(a.email,"</td><td>").concat(r(a.tipo),"</td><td>").concat((e=a._id,'\n    <button type="button" class="btn btn-secondary" name="buttonEnviarEditarPessoa" value="'.concat(e,'">Editar</button>\n    <button type="button" class="btn btn-danger" name="buttonEnviarDeletarPessoa" value="').concat(e,'">Deletar</button>\n  ')),"</td></tr>\n    ")})),t+="</tbody>\n  </table>")),a('[name="buttonEnviarDeletarPessoa"]').each((function(e,t){a(t).on("click",i)})),a('[name="buttonEnviarEditarPessoa"]').each((function(e,t){a(t).on("click",l)}))):a("#empty_data").show()},l=function(t){a("#editar_pessoa").show(),a("#label_editar").show(),a("#adicionar_pessoa").hide(),a("#label_adicionar").hide(),a("#pessoa_modal").modal("show");var n=e.find((function(a){return a._id==t.target.value}));a('[name="_id"]').val(n._id),a('[name="nome"]').val(n.nome),a('[name="email"]').val(n.email),a('[name="tipo"][value="'.concat(n.tipo,'"]')).prop("checked",!0)},d=function(){(n=a("#api_url").val()).length&&a.ajax({method:"GET",url:n+"/pessoa",data:{}}).done((function(a){e=a})).fail((function(a){e=[]})).always((function(){s()}))};a("#api_url").on("blur",d),a("#api_url").val().length&&d(),a("#adicionar_pessoa").on("click",(function(t){if(t.preventDefault(),a("#form_pessoa")[0].checkValidity()){o(!0);var i=a("#form_pessoa").serializeArray().reduce((function(a,e){return a[e.name]=e.value,a}),{});delete i._id,a.ajax({method:"POST",url:n+"/pessoa",data:JSON.stringify(i),contentType:"application/json"}).done((function(a){e.push(a),s(),alert("Pessoa adicionada!")})).fail((function(a){alert("Erro ao adicionar pessoa!")})).always((function(){a("#form_pessoa")[0].reset(),o(!1),a("#pessoa_modal").modal("hide")}))}else a("#form_pessoa")[0].reportValidity()})),a("#editar_pessoa").on("click",(function(t){if(t.preventDefault(),a("#form_pessoa")[0].checkValidity()){o(!0);var i=a("#form_pessoa").serializeArray().reduce((function(a,e){return a[e.name]=e.value,a}),{}),r=i._id;delete i._id,a.ajax({method:"PUT",url:n+"/pessoa/"+r,data:JSON.stringify(i),contentType:"application/json"}).done((function(a){e=e.map((function(a){return a._id==r?(i._id=r,i):a})),s(),alert("Pessoa editada!")})).fail((function(a){alert("Erro ao editar pessoa!")})).always((function(){a("#form_pessoa")[0].reset(),o(!1),a("#pessoa_modal").modal("hide")}))}else a("#form_pessoa")[0].reportValidity()})),a("#cancelar").on("click",(function(e){e.preventDefault(),a("#form_pessoa")[0].reset()})),a("#nova_pessoa").on("click",(function(e){a("#label_adicionar").show(),a("#adicionar_pessoa").show(),a("#label_editar").hide(),a("#editar_pessoa").hide()}))}.call(this,t("EVdn"))},hZTp:function(a,e,t){}},[["e6Wu",1,2]]]);